@use 'sass:math';

@use '../sass/settings';
@use '../sass/functions';

@use '../sass/baseline';
@use '../sass/typography';
@use '../sass/breakpoints';

@use '../sass/button';
@use '../sass/list';
@use 'common';
@use '../sass/states';

$_search-form-text-input-height: baseline.increments(6);
$_search-form-vertical-spacing: baseline.increments(1);
$_search-form-gutter: 4px;
$_search-button-width: functions.px-to-rem(76px);

.home-page-hero {
  @include common.container-horizontal-spacing();
  display: flex;
  justify-content: space-around;
}

.home-page-hero__search_form {
  width: 100%;
  max-width: functions.px-to-rem(400px); // limit form width to match width of preceding copy
  position: relative;
  margin-bottom: $_search-form-vertical-spacing;
}

.home-page-hero__search_text {
  width: 100%;
  height: $_search-form-text-input-height;
  border: settings.$border-width solid settings.$colour-furniture;
  border-radius: settings.$border-radius;
  padding-top: baseline.increments(math.div(17, 8));
  padding-bottom: baseline.increments(math.div(17, 8));
  padding-left: functions.px-to-rem($_search-form-gutter);
  padding-right: $_search-button-width + 2 * functions.px-to-rem($_search-form-gutter);
  margin-bottom: $_search-form-vertical-spacing;
  color: settings.$colour-text-primary;
  background-color: settings.$colour-home-page-search;
}

.home-page-hero__search_button {
  @include button.button();
  position: absolute;
  top: $_search-form-gutter;
  right: $_search-form-gutter;
  width: $_search-button-width;
  height: calc(#{$_search-form-text-input-height} - 2 * #{$_search-form-gutter});
}

.home-page-hero__search_form_label {
  @include typography.body();
}

.home-page-hero__content {
  margin-bottom: baseline.increments(4);

  @media screen and (min-width: common.$home-page-breakpoint) {
    margin-top: baseline.increments(7.5); // Offset content from top of image
    padding-right: 2rem;
  }
}

.home-page-hero__content_title {
  @include typography.headline();
  margin-top: baseline.increments(2.5);
}

.home-page-hero__content_byline {
  @include typography.body();
}

.home-page-hero__picture {
  max-width: functions.px-to-rem(512px);
  display: flex;
  align-items: flex-end;
}

.home-page-hero__image {
  display: none;

  @media screen and (min-width: common.$home-page-breakpoint) {
    @supports(display: flex) {
      display: block;
    }
    width: 100%;
  }
}

.home-page-hero__statistics {
  @include list.basics();
  margin-bottom: 1.5rem;
  display: flex;
  flex-wrap: wrap;
}

.home-page-hero__statistic {
  @include typography.body();
}

.home-page-hero__statistic_link {
  display: flex;
  align-items: baseline;
}

.home-page-hero__statistic_number {
  @include typography.section();
  color: settings.$colour-text-primary;
  margin-right: 4px;
}

.home-page-hero__statistic_title {
  color: settings.$colour-text-primary;
  margin-right: 1rem;
}

.home-page-hero__sciety_feed_link {
  @include common.primary-button();
  width: unset;
  margin-left: 0;
  margin-bottom: 1.5rem;

  @media screen and (min-width: common.$button-stacking-breakpoint) {
    margin-bottom: 1.5rem;
  }
}

.home-page-hero-with-video {
  @include common.container-horizontal-spacing();
  padding-left: 0;
  padding-right: 0;
  display: flex;
  justify-content: space-around;
}

.home-page-hero-with-video__search_form {
  width: 100%;
  max-width: functions.px-to-rem(400px); // limit form width to match width of preceding copy
  position: relative;
  margin-bottom: $_search-form-vertical-spacing;
}

.home-page-hero-with-video__search_text {
  width: 100%;
  height: $_search-form-text-input-height;
  border: settings.$border-width solid settings.$colour-furniture;
  border-radius: settings.$border-radius;
  padding-top: baseline.increments(math.div(17, 8));
  padding-bottom: baseline.increments(math.div(17, 8));
  padding-left: functions.px-to-rem($_search-form-gutter);
  padding-right: $_search-button-width + 2 * functions.px-to-rem($_search-form-gutter);
  margin-bottom: $_search-form-vertical-spacing;
  color: settings.$colour-text-primary;
  background-color: settings.$colour-home-page-search;
}

.home-page-hero-with-video__search_button {
  @include button.button();
  position: absolute;
  top: $_search-form-gutter;
  right: $_search-form-gutter;
  width: $_search-button-width;
  height: calc(#{$_search-form-text-input-height} - 2 * #{$_search-form-gutter});
}

.home-page-hero-with-video__search_form_label {
  @include typography.body();
}

.home-page-hero-with-video__content {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  max-width: settings.$max-site-width;
  margin: 0 auto;
  background-color: settings.$colour-page-background;

  @media screen and (min-width: common.$home-page-breakpoint) {
    flex-wrap: nowrap;
    position: relative;

    &::before {
      content: '';
      border-left: 9000px solid settings.$colour-page-background;
      position: absolute;
      bottom: 0;
      left: -9000px;
      top: 0;
      right: 0;
      z-index: -1;
    }

    &::after {
      content: '';
      border-left: 9000px solid settings.$colour-container-background;
      position: absolute;
      bottom: 0;
      left: 0;
      top: 0;
      right: -9000px;
      z-index: -1;
    }
  }
}

.home-page-hero-with-video__content_title {
  @include typography.headline();
  margin-top: baseline.increments(2.5);
}

.home-page-hero-with-video__content_byline {
  @include typography.body();
}

.home-page-hero-with-video__video_call_to_action {
  display: flex;
  justify-content: center;
  align-items: center;
  background: url('images/home-page-illustration.png') no-repeat center center;
  background-size: contain;
  width: 100%;
  height: 361px;

  @media screen and (min-width: common.$home-page-breakpoint) {
    width: functions.px-to-rem(396px);
    height: 100%;
  }  
}

.home-page-hero-with-video__left_wrapper {
  padding-bottom: baseline.increments(6);
  padding-right: functions.px-to-rem(16px);
  padding-left: functions.px-to-rem(16px);
  padding-top: baseline.increments(2.5);

  @media screen and (min-width: common.$home-page-breakpoint) {
    padding-top: baseline.increments(7.5);

  }

}

.home-page-hero-with-video__right_wrapper {
  padding-right: functions.px-to-rem(16px);
  padding-left: functions.px-to-rem(16px);
  background-color: settings.$colour-container-background;
  padding-top: common.$section-padding;
  padding-bottom: common.$section-padding;
  width: 100%;
  
  @media screen and (min-width: common.$home-page-breakpoint) {
    padding-left: functions.px-to-rem(48px);
    width: unset;
  }
}

.home-page-hero-with-video__video_cta_text_wrapper {
  text-align: center;
  margin-top: calc(#{baseline.increments(8)} * -1);
  margin-left: functions.px-to-rem(25.6px);

  p,
  a {
    background-color: rgb(226, 230, 233);
    font-size: functions.px-to-rem(18px);
    font-weight: bold;

    @include breakpoints.not-narrow() {
      font-size: functions.px-to-rem(20px);
    }
  }

  p {
    margin-bottom: 0;
  }

  a {
    display: inline-flex;
    align-items: center;
    gap: functions.px-to-rem(8px);

    @include states.link() {
      text-decoration: underline;
    }
  }
}
